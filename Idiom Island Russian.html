<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –û—Å—Ç—Ä–æ–≤–µ –ò–¥–∏–æ–º</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Inter:wght@400;500;600;700&display=swap');
    .game-font { font-family: 'Fredoka One', cursive; }
    .body-font { font-family: 'Inter', sans-serif; }
    .island-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .zone-card { transition: all 0.3s ease; }
    .zone-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
    .zone-locked { opacity: 0.6; filter: grayscale(100%); }
    .progress-bar { transition: width 0.5s ease; }
    .drag-item { cursor: grab; transition: all 0.2s ease; }
    .drag-item:hover { transform: scale(1.05); }
    .drop-zone { min-height: 60px; transition: all 0.2s ease; }
    .drop-zone.drag-over { background-color: #e0f2fe; border-color: #0284c7; }
    .correct-match { background-color: #dcfce7 !important; border-color: #16a34a !important; }
    .wrong-match   { background-color: #fef2f2 !important; border-color: #dc2626 !important; }
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    .bounce-animation { animation: bounce 0.6s; }
    .timer-warning { animation: pulse 1s infinite; }
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body class="island-bg body-font">
  <div id="app" class="min-h-screen">
    <div id="mainMenu" class="container mx-auto px-4 py-8">
      <div class="text-center mb-12">
        <h1 class="game-font text-6xl text-white mb-4">üèùÔ∏è –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –û—Å—Ç—Ä–æ–≤–µ –ò–¥–∏–æ–º</h1>
        <p class="text-xl text-blue-100 mb-8">–û—Å–≤–æ–π—Ç–µ 100 –∏–¥–∏–æ–º –≤ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏—è—Ö!</p>
        <div class="bg-white/20 backdrop-blur-sm rounded-2xl p-6 max-w-md mx-auto mb-8">
          <div class="flex justify-between items-center mb-4">
            <span class="text-white font-semibold">–û–±—â–∏–π —Å—á–µ—Ç:</span>
            <span id="totalScore" class="text-2xl font-bold text-yellow-300">0</span>
          </div>
          <div class="w-full bg-white/20 rounded-full h-3">
            <div id="overallProgress" class="progress-bar bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full" style="width: 0%"></div>
          </div>
          <p class="text-blue-100 text-sm mt-2">–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ –ú–∞—Å—Ç–µ—Ä–∞</p>
        </div>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
        <div class="zone-card bg-white rounded-2xl p-6 shadow-xl" data-zone="1">
          <div class="text-center">
            <div class="text-4xl mb-4">üèñÔ∏è</div>
            <h3 class="game-font text-2xl text-blue-600 mb-2">–ë—É—Ö—Ç–∞ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π</h3>
            <p class="text-gray-600 mb-4">–°–æ–ø–æ—Å—Ç–∞–≤—å—Ç–µ –∏–¥–∏–æ–º—ã —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏</p>
            <div class="flex justify-between text-sm text-gray-500 mb-4">
              <span>–ú–∞–∫—Å: 100</span>
              <span id="zone1Score">–°—á–µ—Ç: 0</span>
            </div>
            <button onclick="startZone(1)" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-full font-semibold">
              –ù–∞—á–∞—Ç—å
            </button>
          </div>
        </div>
        <div class="zone-card bg-white rounded-2xl p-6 shadow-xl zone-locked" data-zone="2">
          <div class="text-center">
            <div class="text-4xl mb-4">‚õ∞Ô∏è</div>
            <h3 class="game-font text-2xl text-gray-400 mb-2">–°–∫–∞–ª—ã –û–±–º–∞–Ω–∞</h3>
            <p class="text-gray-400 mb-4">–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –õ–æ–∂—å</p>
            <div class="flex justify-between text-sm text-gray-400 mb-4">
              <span>–ú–∞–∫—Å: 100</span>
              <span id="zone2Score">–°—á–µ—Ç: 0</span>
            </div>
            <button class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full cursor-not-allowed">
              üîí –ó–∞–∫—Ä—ã—Ç–æ
            </button>
          </div>
        </div>
        <div class="zone-card bg-white rounded-2xl p-6 shadow-xl zone-locked" data-zone="3">
          <div class="text-center">
            <div class="text-4xl mb-4">üíé</div>
            <h3 class="game-font text-2xl text-gray-400 mb-2">–°–æ–∫—Ä–æ–≤–∏—â–µ –ò–¥–∏–æ–º</h3>
            <p class="text-gray-400 mb-4">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–ø—É—Å–∫–∏</p>
            <div class="flex justify-between text-sm text-gray-400 mb-4">
              <span>–ú–∞–∫—Å: 150</span>
              <span id="zone3Score">–°—á–µ—Ç: 0</span>
            </div>
            <button class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full cursor-not-allowed">
              üîí –ó–∞–∫—Ä—ã—Ç–æ
            </button>
          </div>
        </div>
        <div class="zone-card bg-white rounded-2xl p-6 shadow-xl zone-locked" data-zone="4">
          <div class="text-center">
            <div class="text-4xl mb-4">‚ö°</div>
            <h3 class="game-font text-2xl text-gray-400 mb-2">–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è –õ–∞–≥—É–Ω–∞</h3>
            <p class="text-gray-400 mb-4">–ë—ã—Å—Ç—Ä—ã–π –∫–≤–∏–∑</p>
            <div class="flex justify-between text-sm text-gray-400 mb-4">
              <span>–ú–∞–∫—Å: 100</span>
              <span id="zone4Score">–°—á–µ—Ç: 0</span>
            </div>
            <button class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full cursor-not-allowed">
              üîí –ó–∞–∫—Ä—ã—Ç–æ
            </button>
          </div>
        </div>
        <div class="zone-card bg-white rounded-2xl p-6 shadow-xl zone-locked" data-zone="5">
          <div class="text-center">
            <div class="text-4xl mb-4">üåÄ</div>
            <h3 class="game-font text-2xl text-gray-400 mb-2">–í–∏—Ö—Ä–µ–≤—ã–µ –°–ª–æ–≤–∞</h3>
            <p class="text-gray-400 mb-4">–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</p>
            <div class="flex justify-between text-sm text-gray-400 mb-4">
              <span>–ú–∞–∫—Å: 150</span>
              <span id="zone5Score">–°—á–µ—Ç: 0</span>
            </div>
            <button class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full cursor-not-allowed">
              üîí –ó–∞–∫—Ä—ã—Ç–æ
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div id="gameScreen" class="hidden min-h-screen p-4 flex flex-col">
      <div class="w-full flex justify-between items-center mb-4">
        <button onclick="returnToMenu()" class="text-white text-3xl leading-none">
          &times;
        </button>
        <div id="lifeCounter" class="flex items-center text-white">
          <span class="text-xl mr-2">‚ù§Ô∏è</span>
          <span id="lives" class="text-2xl font-bold">5</span>
        </div>
        <div id="gameTimer" class="text-white text-xl font-bold hidden">60</div>
      </div>
      <div id="gameContent" class="flex-grow flex items-center justify-center">
        </div>
    </div>
    
    <div id="resultsModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center p-4 z-50">
      <div class="bg-white rounded-2xl p-8 max-w-sm w-full text-center shadow-2xl">
        <div id="resultsIcon" class="text-6xl mb-4"></div>
        <h2 id="resultsTitle" class="game-font text-3xl mb-2"></h2>
        <p id="resultsMessage" class="body-font text-gray-600 mb-4"></p>
        <div id="resultsScore" class="text-4xl font-bold text-yellow-500 mb-6"></div>
        <button onclick="closeResults()" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-full font-semibold w-full">
          –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
        </button>
      </div>
    </div>
    
  </div>

  <script>
    let gameData = {
      totalScore: 0,
      zoneScores: [0, 0, 0, 0, 0],
      lives: 5,
      currentZone: 0
    };

    const scenarios = {
      // Zone 1: Matching Idioms
      1: {
        title: "–ë—É—Ö—Ç–∞ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π",
        scenarios: [
          { idiom: "–ö–∞–∫ –¥–≤–µ –∫–∞–ø–ª–∏ –≤–æ–¥—ã", meaning: "–ò–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –∏–ª–∏ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏–µ.", type: "match" },
          { idiom: "–í–æ–¥–∏—Ç—å –∑–∞ –Ω–æ—Å", meaning: "–û–±–º–∞–Ω—ã–≤–∞—Ç—å, –≤–≤–æ–¥–∏—Ç—å –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ.", type: "match" },
          { idiom: "–î–µ—Ä–∂–∏ —É—Ö–æ –≤–æ—Å—Ç—Ä–æ", meaning: "–ë—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–º –∏ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º.", type: "match" },
          { idiom: "–ö—É—Å–∞—Ç—å –ª–æ–∫—Ç–∏", meaning: "–ò—Å–ø—ã—Ç—ã–≤–∞—Ç—å —Å–∏–ª—å–Ω–æ–µ —Å–æ–∂–∞–ª–µ–Ω–∏–µ –æ —á—ë–º-–ª–∏–±–æ —É–ø—É—â–µ–Ω–Ω–æ–º.", type: "match" },
          { idiom: "–î–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", meaning: "–°–∏–ª—å–Ω–æ –ø—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ.", type: "match" },
          { idiom: "–ó–∞—Ä—É–±–∏—Ç—å –Ω–∞ –Ω–æ—Å—É", meaning: "–ó–∞–ø–æ–º–Ω–∏—Ç—å —á—Ç–æ-–ª–∏–±–æ –æ—á–µ–Ω—å –∫—Ä–µ–ø–∫–æ.", type: "match" },
          { idiom: "–ë–∏—Ç—å –±–∞–∫–ª—É—à–∏", meaning: "–ë–µ–∑–¥–µ–ª—å–Ω–∏—á–∞—Ç—å, –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ø—É—Å—Ç—è–∫–∞–º–∏.", type: "match" },
          { idiom: "–°–ª–æ–º—è –≥–æ–ª–æ–≤—É", meaning: "–û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ, —Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ.", type: "match" },
          { idiom: "–ö–∞–∫ —Ä—ã–±–∞ –≤ –≤–æ–¥–µ", meaning: "–ß—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –æ—á–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ –≤ –∫–∞–∫–æ–π-–ª–∏–±–æ –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ.", type: "match" },
          { idiom: "–ë–µ–∑ —Å—É—á–∫–∞ –∏ –∑–∞–¥–æ—Ä–∏–Ω–∫–∏", meaning: "–ë–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∏–π.", type: "match" }
        ],
        scoreMultiplier: 10
      },
      // Zone 2: True/False
      2: {
        title: "–°–∫–∞–ª—ã –û–±–º–∞–Ω–∞",
        scenarios: [
          { idiom: "–ü–æ—Å–ª–µ –¥–æ–∂–¥–∏—á–∫–∞ –≤ —á–µ—Ç–≤–µ—Ä–≥", meaning: "–ù–∏–∫–æ–≥–¥–∞.", correct: true, type: "trueFalse" },
          { idiom: "–û—Å—Ç–∞—Ç—å—Å—è —Å –Ω–æ—Å–æ–º", meaning: "–û–∫–∞–∑–∞—Ç—å—Å—è –±–µ–∑ –≤—Å–µ–≥–æ.", correct: false, type: "trueFalse" }, // Correct meaning: "–ë—ã—Ç—å –æ–±–º–∞–Ω—É—Ç—ã–º."
          { idiom: "–°–∫—Ä–µ–ø—è —Å–µ—Ä–¥—Ü–µ", meaning: "–î–µ–ª–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ –ø—Ä–æ—Ç–∏–≤ —Å–≤–æ–µ–π –≤–æ–ª–∏.", correct: true, type: "trueFalse" },
          { idiom: "–ö–æ—Ç –Ω–∞–ø–ª–∞–∫–∞–ª", meaning: "–û—á–µ–Ω—å –º–Ω–æ–≥–æ.", correct: false, type: "trueFalse" }, // Correct meaning: "–û—á–µ–Ω—å –º–∞–ª–æ."
          { idiom: "–°—á–∏—Ç–∞—Ç—å –≤–æ—Ä–æ–Ω", meaning: "–ú–µ–¥–ª–∏—Ç—å, –±–µ–∑–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å.", correct: false, type: "trueFalse" }, // Correct meaning: "–†–∞—Å—Å–µ—è–Ω–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ —Å—Ç–æ—Ä–æ–Ω–∞–º."
          { idiom: "–ù–∞ —Å–µ–¥—å–º–æ–º –Ω–µ–±–µ", meaning: "–ò—Å–ø—ã—Ç—ã–≤–∞—Ç—å –≤—ã—Å—à—É—é —Å—Ç–µ–ø–µ–Ω—å –±–ª–∞–∂–µ–Ω—Å—Ç–≤–∞.", correct: true, type: "trueFalse" },
          { idiom: "–ú–æ—Ä–µ –ø–æ –∫–æ–ª–µ–Ω–æ", meaning: "–ù–∏—á–µ–≥–æ –Ω–µ –±–æ—è—Ç—å—Å—è.", correct: true, type: "trueFalse" },
          { idiom: "–î–µ–ª–∞—Ç—å –ø–æ–≥–æ–¥—É", meaning: "–ò–º–µ—Ç—å —Ä–µ—à–∞—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.", correct: true, type: "trueFalse" },
          { idiom: "–ù–∞ –≤—Å–µ—Ö –ø–∞—Ä—É—Å–∞—Ö", meaning: "–û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ.", correct: true, type: "trueFalse" },
          { idiom: "–ü–µ—Ä–µ–ª–∏–≤–∞—Ç—å –∏–∑ –ø—É—Å—Ç–æ–≥–æ –≤ –ø–æ—Ä–æ–∂–Ω–µ–µ", meaning: "–ë–µ—Å–ø–æ–ª–µ–∑–Ω–æ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ.", correct: true, type: "trueFalse" }
        ],
        scoreMultiplier: 10
      },
      // Zone 3: Fill-in-the-Blank
      3: {
        title: "–°–æ–∫—Ä–æ–≤–∏—â–µ –ò–¥–∏–æ–º",
        scenarios: [
          { sentence: "–û–Ω —Ä–∞–±–æ—Ç–∞–ª –∫–∞–∫... –ª–æ—à–∞–¥—å.", blank: "–ª–æ—à–∞–¥—å", type: "fill" },
          { sentence: "–û–Ω –¥–µ—Ä–∂–∏—Ç —è–∑—ã–∫ –∑–∞...", blank: "–∑—É–±–∞–º–∏", type: "fill" },
          { sentence: "–û–Ω–∏ –∂–∏–≤—É—Ç –∫–∞–∫ –∫–æ—à–∫–∞ —Å...", blank: "—Å–æ–±–∞–∫–æ–π", type: "fill" },
          { sentence: "–û–Ω–∞ –±—ã–ª–∞ –Ω–∞ —Å–µ–¥—å–º–æ–º...", blank: "–Ω–µ–±–µ", type: "fill" },
          { sentence: "–û–Ω –≤–µ—Ä–Ω—É–ª—Å—è —Å –ø—É—Å—Ç—ã–º–∏...", blank: "—Ä—É–∫–∞–º–∏", type: "fill" },
          { sentence: "–û–Ω –Ω–æ—Å–∏—Ç –≤–æ–¥—É –≤...", blank: "—Ä–µ—à–µ—Ç–µ", type: "fill" },
          { sentence: "–≠—Ç–æ –±—ã–ª –∫–∞–º–µ–Ω—å –ø—Ä–µ—Ç–∫–Ω–æ–≤–µ–Ω–∏—è...", blank: "–ø—Ä–µ—Ç–∫–Ω–æ–≤–µ–Ω–∏—è", type: "fill" },
          { sentence: "–û–Ω –¥–µ–ª–∞–µ—Ç –∏–∑ –º—É—Ö–∏...", blank: "—Å–ª–æ–Ω–∞", type: "fill" },
          { sentence: "–û–Ω —Ä–æ–¥–∏–ª—Å—è –≤ —Ä—É–±–∞—à–∫–µ...", blank: "—Ä—É–±–∞—à–∫–µ", type: "fill" },
          { sentence: "–û–Ω –∏—â–µ—Ç –≤–µ—Ç—Ä–∞ –≤...", blank: "–ø–æ–ª–µ", type: "fill" }
        ],
        scoreMultiplier: 15
      },
      // Zone 4: Timed Quiz
      4: {
        title: "–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è –õ–∞–≥—É–Ω–∞",
        scenarios: [
          {
            question: "–ò–¥–∏–æ–º–∞ '–í —á–∞—Å –ø–æ —á–∞–π–Ω–æ–π –ª–æ–∂–∫–µ' –æ–∑–Ω–∞—á–∞–µ—Ç...",
            answers: ["–û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ", "–û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ", "–ß–∞—Å—Ç–æ", "–û—á–µ–Ω—å –º–Ω–æ–≥–æ"],
            correctAnswer: 0,
            type: "quiz"
          },
          {
            question: "–ö–∞–∫–∞—è –∏–¥–∏–æ–º–∞ –æ–∑–Ω–∞—á–∞–µ—Ç '–ë–µ–∑–¥–µ–ª—å–Ω–∏—á–∞—Ç—å'?",
            answers: ["–ó–∞—Ä—É–±–∏—Ç—å –Ω–∞ –Ω–æ—Å—É", "–ë–∏—Ç—å –±–∞–∫–ª—É—à–∏", "–í–æ–¥–∏—Ç—å –∑–∞ –Ω–æ—Å", "–°–∫—Ä–µ–ø—è —Å–µ—Ä–¥—Ü–µ"],
            correctAnswer: 1,
            type: "quiz"
          },
          {
            question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç '–î–µ—Ä–∂–∏ —É—Ö–æ –≤–æ—Å—Ç—Ä–æ'?",
            answers: ["–ë—É–¥—å –≤–µ–∂–ª–∏–≤", "–ë—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω", "–ì–æ–≤–æ—Ä–∏ –≥—Ä–æ–º–∫–æ", "–°–ª—É—à–∞–π –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ"],
            correctAnswer: 1,
            type: "quiz"
          },
          {
            question: "–ö–∞–∫–∞—è –∏–¥–∏–æ–º–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ '–ò—Å–ø—ã—Ç—ã–≤–∞—Ç—å —Å–∏–ª—å–Ω–æ–µ —Å–æ–∂–∞–ª–µ–Ω–∏–µ'?",
            answers: ["–ù–∞ –≤—Å–µ—Ö –ø–∞—Ä—É—Å–∞—Ö", "–ö—É—Å–∞—Ç—å –ª–æ–∫—Ç–∏", "–°–ª–æ–º—è –≥–æ–ª–æ–≤—É", "–°—á–∏—Ç–∞—Ç—å –≤–æ—Ä–æ–Ω"],
            correctAnswer: 1,
            type: "quiz"
          },
          {
            question: "–ß—Ç–æ –∑–Ω–∞—á–∏—Ç '–ö–∞–∫ –¥–≤–µ –∫–∞–ø–ª–∏ –≤–æ–¥—ã'?",
            answers: ["–û—á–µ–Ω—å –º–Ω–æ–≥–æ", "–û—á–µ–Ω—å –º–∞–ª–æ", "–û—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏", "–û—á–µ–Ω—å —Ä–∞–∑–Ω—ã–µ"],
            correctAnswer: 2,
            type: "quiz"
          },
          {
            question: "–ö–∞–∫–∞—è –∏–¥–∏–æ–º–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è —É–≤–µ—Ä–µ–Ω–Ω–æ –≤ –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ?",
            answers: ["–ö–∞–∫ —Ä—ã–±–∞ –≤ –≤–æ–¥–µ", "–ù–∞ —Å–µ–¥—å–º–æ–º –Ω–µ–±–µ", "–ú–æ—Ä–µ –ø–æ –∫–æ–ª–µ–Ω–æ", "–°–∫—Ä–µ–ø—è —Å–µ—Ä–¥—Ü–µ"],
            correctAnswer: 0,
            type: "quiz"
          },
          {
            question: "–ò–¥–∏–æ–º–∞ '–î–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞' –æ–∑–Ω–∞—á–∞–µ—Ç...",
            answers: ["–ü—Ä–∏–¥–∞–≤–∞—Ç—å –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–ª–æ—á–∞–º", "–ü—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å", "–£–º–µ–Ω—å—à–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ", "–î–µ–ª–∞—Ç—å –±—ã—Å—Ç—Ä–æ"],
            correctAnswer: 1,
            type: "quiz"
          },
          {
            question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç '–ü–æ—Å–ª–µ –¥–æ–∂–¥–∏—á–∫–∞ –≤ —á–µ—Ç–≤–µ—Ä–≥'?",
            answers: ["–û—á–µ–Ω—å —á–∞—Å—Ç–æ", "–ò–Ω–æ–≥–¥–∞", "–†–µ–¥–∫–æ", "–ù–∏–∫–æ–≥–¥–∞"],
            correctAnswer: 3,
            type: "quiz"
          },
          {
            question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∏–¥–∏–æ–º–∞ '–°–ª–æ–º—è –≥–æ–ª–æ–≤—É'?",
            answers: ["–ú–µ–¥–ª–µ–Ω–Ω–æ", "–û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ", "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ", "–ë–µ—Å–ø–æ—Ä—è–¥–æ—á–Ω–æ"],
            correctAnswer: 1,
            type: "quiz"
          },
          {
            question: "–ö–∞–∫–∞—è –∏–¥–∏–æ–º–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ '–ë–µ—Å–ø–æ–ª–µ–∑–Ω–æ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ'?",
            answers: ["–ë–∏—Ç—å –±–∞–∫–ª—É—à–∏", "–ó–∞—Ä—É–±–∏—Ç—å –Ω–∞ –Ω–æ—Å—É", "–ü–µ—Ä–µ–ª–∏–≤–∞—Ç—å –∏–∑ –ø—É—Å—Ç–æ–≥–æ –≤ –ø–æ—Ä–æ–∂–Ω–µ–µ", "–í–æ–¥–∏—Ç—å –∑–∞ –Ω–æ—Å"],
            correctAnswer: 2,
            type: "quiz"
          }
        ],
        scoreMultiplier: 10
      },
      // Zone 5: Sentence Construction
      5: {
        title: "–í–∏—Ö—Ä–µ–≤—ã–µ –°–ª–æ–≤–∞",
        scenarios: [
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: –≤–æ–¥—ã, –∫–∞–∫, –∫–∞–ø–ª–∏, –¥–≤–µ", answer: "–∫–∞–∫ –¥–≤–µ –∫–∞–ø–ª–∏ –≤–æ–¥—ã", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: –∑–∞, –Ω–æ—Å, –≤–æ–¥–∏—Ç—å", answer: "–≤–æ–¥–∏—Ç—å –∑–∞ –Ω–æ—Å", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: –≤–æ—Å—Ç—Ä–æ, —É—Ö–æ, –¥–µ—Ä–∂–∏", answer: "–¥–µ—Ä–∂–∏ —É—Ö–æ –≤–æ—Å—Ç—Ä–æ", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: –ª–æ–∫—Ç–∏, –∫—É—Å–∞—Ç—å", answer: "–∫—É—Å–∞—Ç—å –ª–æ–∫—Ç–∏", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: —Å–ª–æ–Ω–∞, –∏–∑, –º—É—Ö–∏, –¥–µ–ª–∞—Ç—å", answer: "–¥–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: –Ω–∞, –Ω–æ—Å—É, –∑–∞—Ä—É–±–∏—Ç—å", answer: "–∑–∞—Ä—É–±–∏—Ç—å –Ω–∞ –Ω–æ—Å—É", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: –±–∞–∫–ª—É—à–∏, –±–∏—Ç—å", answer: "–±–∏—Ç—å –±–∞–∫–ª—É—à–∏", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: –≥–æ–ª–æ–≤—É, —Å–ª–æ–º—è", answer: "—Å–ª–æ–º—è –≥–æ–ª–æ–≤—É", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: –≤–æ–¥–µ, —Ä—ã–±–∞, –≤, –∫–∞–∫", answer: "–∫–∞–∫ —Ä—ã–±–∞ –≤ –≤–æ–¥–µ", type: "scramble" },
          { question: "–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤: —Å—É—á–∫–∞, –±–µ–∑, –∑–∞–¥–æ—Ä–∏–Ω–∫–∏, –∏", answer: "–±–µ–∑ —Å—É—á–∫–∞ –∏ –∑–∞–¥–æ—Ä–∏–Ω–∫–∏", type: "scramble" }
        ],
        scoreMultiplier: 15
      }
    };

    let s;
    let correctAnswers = 0;
    let timer;

    // Updates score and progress on the main menu
    function updateDisplay() {
      document.getElementById('totalScore').textContent = gameData.totalScore;
      document.getElementById('overallProgress').style.width = (gameData.totalScore / 600) * 100 + '%';
      gameData.zoneScores.forEach((score, index) => {
        const scoreElement = document.getElementById(`zone${index + 1}Score`);
        if (scoreElement) {
          scoreElement.textContent = `–°—á–µ—Ç: ${score}`;
        }
      });
      const lockedZones = document.querySelectorAll('.zone-locked');
      lockedZones.forEach(zone => {
        const zoneId = parseInt(zone.dataset.zone);
        if (gameData.zoneScores[zoneId - 2] > 0) {
          zone.classList.remove('zone-locked');
          zone.querySelector('button').disabled = false;
          zone.querySelector('button').classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
          zone.querySelector('button').classList.add('bg-blue-500', 'hover:bg-blue-600', 'text-white');
          zone.querySelector('button').innerText = '–ù–∞—á–∞—Ç—å';
        }
      });
    }

    // Starts a game zone
    function startZone(zone) {
      gameData.currentZone = zone;
      s = { ...scenarios[zone], currentIndex: 0, score: 0, correctAnswers: 0, lives: 5, time: 60 };
      document.getElementById('mainMenu').classList.add('hidden');
      document.getElementById('gameScreen').classList.remove('hidden');
      document.getElementById('lives').textContent = gameData.lives;
      if (zone === 4) {
        document.getElementById('gameTimer').classList.remove('hidden');
        document.getElementById('gameTimer').textContent = s.time;
        timer = setInterval(() => {
          s.time--;
          document.getElementById('gameTimer').textContent = s.time;
          if (s.time <= 10) {
            document.getElementById('gameTimer').classList.add('timer-warning');
          }
          if (s.time <= 0) {
            clearInterval(timer);
            endGame(true);
          }
        }, 1000);
      } else {
        document.getElementById('gameTimer').classList.add('hidden');
      }
      showScenario();
    }

    // Displays the current scenario
    function showScenario() {
      if (s.lives <= 0) {
        endGame(true);
        return;
      }
      const container = document.getElementById('gameContent');
      container.innerHTML = '';
      const scenario = s.scenarios[s.currentIndex];

      let content = '';
      if (scenario.type === 'match') {
        const shuffledMeanings = shuffleArray(s.scenarios.map(sc => sc.meaning));
        content = `
          <div class="w-full max-w-2xl bg-white rounded-2xl p-6 shadow-xl flex flex-col items-center">
            <h3 class="game-font text-3xl text-blue-600 mb-6 text-center">
              ${s.title}
            </h3>
            <div class="grid grid-cols-2 gap-4 w-full">
              <div class="col-span-1">
                ${s.scenarios.map(sc => `<div id="drag-${sc.idiom.replace(/\s/g, '_')}" class="drag-item bg-blue-100 p-4 rounded-lg cursor-grab text-center body-font font-medium">${sc.idiom}</div>`).join('')}
              </div>
              <div class="col-span-1">
                ${shuffledMeanings.map(meaning => `<div id="drop-${meaning.replace(/\s/g, '_')}" class="drop-zone border-2 border-dashed border-gray-300 rounded-lg p-4 text-center body-font text-gray-700 font-medium flex items-center justify-center">${meaning}</div>`).join('')}
              </div>
            </div>
            <p class="text-sm text-gray-500 mt-4">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–¥–∏–æ–º—É –∫ –µ—ë –∑–Ω–∞—á–µ–Ω–∏—é.</p>
          </div>
        `;
        container.innerHTML = content;
        addDragAndDropListeners();
      } else if (scenario.type === 'trueFalse') {
        content = `
          <div class="w-full max-w-xl bg-white rounded-2xl p-8 shadow-xl text-center">
            <h3 class="game-font text-3xl text-purple-600 mb-4">${s.title}</h3>
            <p class="text-2xl text-gray-800 mb-6 body-font font-semibold">
              –ò–¥–∏–æ–º–∞ "${scenario.idiom}" –æ–∑–Ω–∞—á–∞–µ—Ç "${scenario.meaning}".
            </p>
            <div class="flex justify-center space-x-4">
              <button onclick="checkAnswer(${s.currentIndex}, true)" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-full text-lg font-semibold w-1/2">
                –ü—Ä–∞–≤–¥–∞
              </button>
              <button onclick="checkAnswer(${s.currentIndex}, false)" class="bg-red-500 hover:bg-red-600 text-white px-8 py-3 rounded-full text-lg font-semibold w-1/2">
                –õ–æ–∂—å
              </button>
            </div>
          </div>
        `;
        container.innerHTML = content;
      } else if (scenario.type === 'fill') {
        const [part1, part2] = scenario.sentence.split('...');
        content = `
          <div class="w-full max-w-xl bg-white rounded-2xl p-8 shadow-xl text-center">
            <h3 class="game-font text-3xl text-yellow-600 mb-4">${s.title}</h3>
            <p class="text-2xl text-gray-800 mb-6 body-font font-semibold">
              ${part1}<input type="text" id="fillBlankInput" class="body-font w-40 text-center text-blue-600 border-b-2 border-blue-400 focus:outline-none focus:border-blue-600 mx-2">
              ${part2 || ''}
            </p>
            <button onclick="checkFillBlankAnswer(${s.currentIndex})" class="bg-yellow-500 hover:bg-yellow-600 text-white px-8 py-3 rounded-full text-lg font-semibold">
              –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
            </button>
          </div>
        `;
        container.innerHTML = content;
      } else if (scenario.type === 'quiz') {
        content = `
          <div class="w-full max-w-2xl bg-white rounded-2xl p-8 shadow-xl text-center">
            <h3 class="game-font text-3xl text-red-600 mb-4">${s.title}</h3>
            <p class="text-xl text-gray-800 mb-6 body-font font-semibold">
              ${scenario.question}
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              ${scenario.answers.map((answer, index) => `
                <button onclick="checkQuizAnswer(${s.currentIndex}, ${index})" class="bg-red-100 hover:bg-red-200 text-red-800 px-6 py-3 rounded-full font-semibold">
                  ${answer}
                </button>
              `).join('')}
            </div>
          </div>
        `;
        container.innerHTML = content;
      } else if (scenario.type === 'scramble') {
        const scrambledWords = shuffleArray(scenario.question.split(', '));
        content = `
          <div class="w-full max-w-2xl bg-white rounded-2xl p-8 shadow-xl text-center">
            <h3 class="game-font text-3xl text-indigo-600 mb-4">${s.title}</h3>
            <div id="wordBank" class="flex flex-wrap justify-center gap-2 mb-6 p-4 rounded-lg border-2 border-dashed border-indigo-300">
              ${scrambledWords.map(word => `<span class="drag-item bg-indigo-100 text-indigo-800 px-4 py-2 rounded-full cursor-grab body-font font-semibold">${word}</span>`).join('')}
            </div>
            <div id="sentenceDropZone" class="drop-zone w-full min-h-24 p-4 rounded-lg bg-gray-100 border-2 border-gray-300 flex flex-wrap gap-2 items-center justify-center mb-6">
              <span class="text-gray-500">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞, —á—Ç–æ–±—ã —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.</span>
            </div>
            <button onclick="checkScrambleAnswer(${s.currentIndex})" class="bg-indigo-500 hover:bg-indigo-600 text-white px-8 py-3 rounded-full text-lg font-semibold">
              –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
            </button>
          </div>
        `;
        container.innerHTML = content;
        addScrambleListeners();
      }
    }

    // Checks answer for True/False and Quiz
    function checkAnswer(index, userAnswer) {
      const scenario = s.scenarios[index];
      const isCorrect = scenario.correct === userAnswer;
      if (isCorrect) {
        s.score += s.scoreMultiplier;
        s.correctAnswers++;
        document.getElementById('gameContent').classList.add('bounce-animation');
        setTimeout(() => document.getElementById('gameContent').classList.remove('bounce-animation'), 600);
      } else {
        gameData.lives--;
        document.getElementById('lives').textContent = gameData.lives;
      }
      setTimeout(nextScenario, 800);
    }

    // Checks answer for fill-in-the-blank
    function checkFillBlankAnswer(index) {
      const scenario = s.scenarios[index];
      const userAnswer = document.getElementById('fillBlankInput').value.trim().toLowerCase();
      const correctAnswer = scenario.blank.trim().toLowerCase();
      const isCorrect = userAnswer === correctAnswer;
      if (isCorrect) {
        s.score += s.scoreMultiplier;
        s.correctAnswers++;
        document.getElementById('gameContent').classList.add('bounce-animation');
        setTimeout(() => document.getElementById('gameContent').classList.remove('bounce-animation'), 600);
      } else {
        gameData.lives--;
        document.getElementById('lives').textContent = gameData.lives;
        document.getElementById('fillBlankInput').classList.add('wrong-match');
      }
      setTimeout(nextScenario, 800);
    }

    // Checks answer for quiz
    function checkQuizAnswer(index, userAnswerIndex) {
      const scenario = s.scenarios[index];
      const isCorrect = scenario.correctAnswer === userAnswerIndex;
      if (isCorrect) {
        s.score += s.scoreMultiplier;
        s.correctAnswers++;
        document.getElementById('gameContent').classList.add('bounce-animation');
        setTimeout(() => document.getElementById('gameContent').classList.remove('bounce-animation'), 600);
      } else {
        gameData.lives--;
        document.getElementById('lives').textContent = gameData.lives;
      }
      setTimeout(nextScenario, 800);
    }

    // Advances to the next scenario or ends the game
    function nextScenario() {
      s.currentIndex++;
      if (s.currentIndex < s.scenarios.length) {
        showScenario();
      } else {
        gameData.zoneScores[gameData.currentZone - 1] = s.score;
        gameData.totalScore += s.score;
        endGame();
      }
    }

    function endGame(gameOver = false) {
      clearInterval(timer);
      showResults(gameData.currentZone, s.score, s.correctAnswers, s.scenarios.length, gameOver);
    }

    // RESULTS MODAL
    function showResults(zone, score, correct, total, gameOver = false) {
      const modal = document.getElementById('resultsModal');
      const icon = document.getElementById('resultsIcon');
      const title = document.getElementById('resultsTitle');
      const message = document.getElementById('resultsMessage');
      const scoreDisplay = document.getElementById('resultsScore');
      const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;
      
      if (gameOver) {
          icon.textContent = 'üíî';
          title.textContent = '–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!';
          message.textContent = `–£ –≤–∞—Å –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –∂–∏–∑–Ω–∏. –ü–æ—Ç—Ä–µ–Ω–∏—Ä—É–π—Ç–µ—Å—å –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!`;
      } else if (percentage >= 80) {
        icon.textContent = 'üéâ';
        title.textContent = '–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!';
        message.textContent = `–í—ã –æ—Å–≤–æ–∏–ª–∏ —ç—Ç—É –∑–æ–Ω—É –Ω–∞ ${percentage}%!`;
      } else if (percentage >= 50) {
        icon.textContent = 'üëç';
        title.textContent = '–•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞!';
        message.textContent = `–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ ${percentage}%. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è!`;
      } else {
        icon.textContent = 'üí™';
        title.textContent = '–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Å—Ç–∞—Ä–∞—Ç—å—Å—è!';
        message.textContent = `–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ ${percentage}%. –ü—Ä–∞–∫—Ç–∏–∫–∞ –≤–µ–¥–µ—Ç –∫ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É!`;
      }
      
      scoreDisplay.textContent = `+${score} –æ—á–∫–æ–≤`;
      modal.classList.remove('hidden');
    }

    function closeResults() {
      document.getElementById('resultsModal').classList.add('hidden');
      returnToMenu();
    }

    function returnToMenu() {
      document.getElementById('gameScreen').classList.add('hidden');
      document.getElementById('mainMenu').classList.remove('hidden');
      updateDisplay();
    }
    
    // Utility function to shuffle an array
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Drag and drop functionality for Zone 1
    function addDragAndDropListeners() {
      document.querySelectorAll('.drag-item').forEach(item => {
        item.setAttribute('draggable', true);
        item.addEventListener('dragstart', e => {
          e.dataTransfer.setData('text/plain', e.target.id.split('-')[1].replace(/_/g, ' '));
        });
      });
      document.querySelectorAll('.drop-zone').forEach(zone => {
        zone.addEventListener('dragover', e => {
          e.preventDefault();
          zone.classList.add('drag-over');
        });
        zone.addEventListener('dragleave', () => {
          zone.classList.remove('drag-over');
        });
        zone.addEventListener('drop', e => {
          e.preventDefault();
          zone.classList.remove('drag-over');
          const draggedIdiom = e.dataTransfer.getData('text/plain');
          const droppedMeaning = zone.textContent.trim();
          const scenario = s.scenarios.find(sc => sc.idiom === draggedIdiom);
          const isCorrect = scenario.meaning === droppedMeaning;

          if (isCorrect) {
            zone.innerHTML = `<span class="font-bold text-green-700">${draggedIdiom}</span>`;
            zone.classList.add('correct-match');
            document.getElementById(`drag-${draggedIdiom.replace(/\s/g, '_')}`).style.display = 'none';
            s.score += s.scoreMultiplier;
            s.correctAnswers++;
          } else {
            zone.classList.add('wrong-match');
            gameData.lives--;
            document.getElementById('lives').textContent = gameData.lives;
          }
          checkMatchCompletion();
        });
      });
    }

    function checkMatchCompletion() {
      const remainingItems = document.querySelectorAll('.drag-item[draggable="true"]').length;
      if (remainingItems === 0) {
        setTimeout(nextScenario, 800);
      }
    }

    // Drag and drop for Zone 5
    let currentSentence = [];
    function addScrambleListeners() {
        const wordBank = document.getElementById('wordBank');
        const sentenceDropZone = document.getElementById('sentenceDropZone');
        const checkButton = document.querySelector('button[onclick="checkScrambleAnswer(' + s.currentIndex + ')"]');

        wordBank.innerHTML = '';
        const scrambledWords = shuffleArray(s.scenarios[s.currentIndex].question.split(', '));
        scrambledWords.forEach(word => {
            const span = document.createElement('span');
            span.className = 'drag-item bg-indigo-100 text-indigo-800 px-4 py-2 rounded-full cursor-grab body-font font-semibold';
            span.textContent = word;
            span.setAttribute('draggable', true);
            span.addEventListener('dragstart', e => {
                e.dataTransfer.setData('text/plain', e.target.textContent);
            });
            wordBank.appendChild(span);
        });

        sentenceDropZone.addEventListener('dragover', e => {
            e.preventDefault();
            sentenceDropZone.classList.add('drag-over');
        });
        sentenceDropZone.addEventListener('dragleave', () => {
            sentenceDropZone.classList.remove('drag-over');
        });
        sentenceDropZone.addEventListener('drop', e => {
            e.preventDefault();
            sentenceDropZone.classList.remove('drag-over');
            const word = e.dataTransfer.getData('text/plain');
            const draggedElement = document.querySelector(`.drag-item[draggable="true"][textContent="${word}"]`);
            if (draggedElement) {
                currentSentence.push(word);
                sentenceDropZone.innerHTML = '';
                currentSentence.forEach(w => {
                    const wordSpan = document.createElement('span');
                    wordSpan.textContent = w;
                    wordSpan.className = 'bg-indigo-200 text-indigo-900 px-4 py-2 rounded-full font-semibold';
                    sentenceDropZone.appendChild(wordSpan);
                });
                draggedElement.style.display = 'none';
            }
        });
    }

    function checkScrambleAnswer(index) {
        const scenario = s.scenarios[index];
        const userAnswer = currentSentence.join(' ').toLowerCase().trim();
        const correctAnswer = scenario.answer.toLowerCase().trim();

        if (userAnswer === correctAnswer) {
            s.score += s.scoreMultiplier;
            s.correctAnswers++;
            document.getElementById('gameContent').classList.add('bounce-animation');
            setTimeout(() => document.getElementById('gameContent').classList.remove('bounce-animation'), 600);
        } else {
            gameData.lives--;
            document.getElementById('lives').textContent = gameData.lives;
        }
        currentSentence = [];
        setTimeout(nextScenario, 800);
    }
    
    document.addEventListener('DOMContentLoaded', updateDisplay);

  </script>
</body>
</html>