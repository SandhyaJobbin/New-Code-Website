
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –û—Å—Ç—Ä–æ–≤–µ –ò–¥–∏–æ–º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Inter:wght@400;500;600;700&display=swap');
        
        .game-font { font-family: 'Fredoka One', cursive; }
        .body-font { font-family: 'Inter', sans-serif; }
        
        .island-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .zone-card {
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        
        .zone-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .zone-locked {
            opacity: 0.6;
            filter: grayscale(100%);
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .drag-item {
            cursor: grab;
            transition: all 0.2s ease;
        }
        
        .drag-item:hover {
            transform: scale(1.05);
        }
        
        .drop-zone {
            min-height: 60px;
            transition: all 0.2s ease;
        }
        
        .drop-zone.drag-over {
            background-color: #e0f2fe;
            border-color: #0284c7;
        }
        
        .correct-match {
            background-color: #dcfce7 !important;
            border-color: #16a34a !important;
        }
        
        .wrong-match {
            background-color: #fef2f2 !important;
            border-color: #dc2626 !important;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .bounce-animation {
            animation: bounce 0.6s;
        }
        
        .timer-warning {
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body class="island-bg body-font">
    <div id="app" class="min-h-screen">
        <!-- Main Menu -->
        <div id="mainMenu" class="container mx-auto px-4 py-8">
            <div class="text-center mb-12">
                <h1 class="game-font text-6xl text-white mb-4">üèùÔ∏è –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –û—Å—Ç—Ä–æ–≤–µ –ò–¥–∏–æ–º</h1>
                <p class="text-xl text-blue-100 mb-8">–û—Å–≤–æ–π—Ç–µ 100 —Ä—É—Å—Å–∫–∏—Ö –∏–¥–∏–æ–º —á–µ—Ä–µ–∑ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –æ—Å—Ç—Ä–æ–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã!</p>
                
                <!-- Player Stats -->
                <div class="bg-white/20 backdrop-blur-sm rounded-2xl p-6 max-w-md mx-auto mb-8">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-white font-semibold">–û–±—â–∏–π —Å—á—ë—Ç:</span>
                        <span id="totalScore" class="text-2xl font-bold text-yellow-300">0</span>
                    </div>
                    <div class="w-full bg-white/20 rounded-full h-3">
                        <div id="overallProgress" class="progress-bar bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full" style="width: 0%"></div>
                    </div>
                    <p class="text-blue-100 text-sm mt-2">–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ –ú–∞—Å—Ç–µ—Ä–∞ –ò–¥–∏–æ–º</p>
                </div>
            </div>
            
            <!-- Zone Selection -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
                <!-- Zone 1: Match-Up Bay -->
                <div class="zone-card bg-white rounded-2xl p-6 shadow-xl" data-zone="1">
                    <div class="text-center">
                        <div class="text-4xl mb-4">üèñÔ∏è</div>
                        <h3 class="game-font text-2xl text-blue-600 mb-2">–ë—É—Ö—Ç–∞ –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π</h3>
                        <p class="text-gray-600 mb-4">–°–æ–ø–æ—Å—Ç–∞–≤—å—Ç–µ –∏–¥–∏–æ–º—ã —Å –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è–º–∏</p>
                        <div class="flex justify-between text-sm text-gray-500 mb-4">
                            <span>–ú–∞–∫—Å: 100 –æ—á–∫–æ–≤</span>
                            <span id="zone1Score">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 0</span>
                        </div>
                        <button onclick="startZone(1)" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-full font-semibold transition-colors">
                            –ù–∞—á–∞—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ
                        </button>
                    </div>
                </div>
                
                <!-- Zone 2: Bluff Cliffs -->
                <div class="zone-card bg-white rounded-2xl p-6 shadow-xl zone-locked" data-zone="2">
                    <div class="text-center">
                        <div class="text-4xl mb-4">‚õ∞Ô∏è</div>
                        <h3 class="game-font text-2xl text-gray-400 mb-2">–°–∫–∞–ª—ã –û–±–º–∞–Ω–∞</h3>
                        <p class="text-gray-400 mb-4">–í—ã–∑–æ–≤—ã –ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –õ–æ–∂—å</p>
                        <div class="flex justify-between text-sm text-gray-400 mb-4">
                            <span>–ú–∞–∫—Å: 50 –æ—á–∫–æ–≤</span>
                            <span id="zone2Score">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 0</span>
                        </div>
                        <button class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full font-semibold cursor-not-allowed">
                            üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
                        </button>
                    </div>
                </div>
                
                <!-- Zone 3: Treasure Trove -->
                <div class="zone-card bg-white rounded-2xl p-6 shadow-xl zone-locked" data-zone="3">
                    <div class="text-center">
                        <div class="text-4xl mb-4">üíé</div>
                        <h3 class="game-font text-2xl text-gray-400 mb-2">–°–æ–∫—Ä–æ–≤–∏—â–Ω–∏—Ü–∞</h3>
                        <p class="text-gray-400 mb-4">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–ø—É—Å–∫–∏</p>
                        <div class="flex justify-between text-sm text-gray-400 mb-4">
                            <span>–ú–∞–∫—Å: 150 –æ—á–∫–æ–≤</span>
                            <span id="zone3Score">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 0</span>
                        </div>
                        <button class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full font-semibold cursor-not-allowed">
                            üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
                        </button>
                    </div>
                </div>
                
                <!-- Zone 4: Lightning Lagoon -->
                <div class="zone-card bg-white rounded-2xl p-6 shadow-xl zone-locked" data-zone="4">
                    <div class="text-center">
                        <div class="text-4xl mb-4">‚ö°</div>
                        <h3 class="game-font text-2xl text-gray-400 mb-2">–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è –õ–∞–≥—É–Ω–∞</h3>
                        <p class="text-gray-400 mb-4">–°–∫–æ—Ä–æ—Å—Ç–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</p>
                        <div class="flex justify-between text-sm text-gray-400 mb-4">
                            <span>–ú–∞–∫—Å: 100 –æ—á–∫–æ–≤</span>
                            <span id="zone4Score">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 0</span>
                        </div>
                        <button class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full font-semibold cursor-not-allowed">
                            üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
                        </button>
                    </div>
                </div>
                
                <!-- Zone 5: Idiom Maze -->
                <div class="zone-card bg-white rounded-2xl p-6 shadow-xl zone-locked" data-zone="5">
                    <div class="text-center">
                        <div class="text-4xl mb-4">üåÄ</div>
                        <h3 class="game-font text-2xl text-gray-400 mb-2">–õ–∞–±–∏—Ä–∏–Ω—Ç –ò–¥–∏–æ–º</h3>
                        <p class="text-gray-400 mb-4">–°—Ü–µ–Ω–∞—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã</p>
                        <div class="flex justify-between text-sm text-gray-400 mb-4">
                            <span>–ú–∞–∫—Å: 150 –æ—á–∫–æ–≤</span>
                            <span id="zone5Score">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 0</span>
                        </div>
                        <button class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full font-semibold cursor-not-allowed">
                            üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
                        </button>
                    </div>
                </div>
                
                <!-- Achievement Badge -->
                <div class="zone-card bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl p-6 shadow-xl">
                    <div class="text-center text-white">
                        <div class="text-4xl mb-4">üèÜ</div>
                        <h3 class="game-font text-2xl mb-2">–í–∞—à —Ä–∞–Ω–≥</h3>
                        <p id="playerRank" class="text-lg font-semibold mb-2">–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è</p>
                        <div class="text-sm opacity-90">
                            <div>üèÜ 500+ –æ—á–∫–æ–≤: –ß–µ–º–ø–∏–æ–Ω</div>
                            <div>üß≠ 400+ –æ—á–∫–æ–≤: –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å</div>
                            <div>üí° 0+ –æ—á–∫–æ–≤: –ü—Ä–∞–∫—Ç–∏–∫—É—é—â–∏–π—Å—è</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Screens -->
        <div id="gameScreen" class="hidden container mx-auto px-4 py-8">
            <!-- Game Header -->
            <div class="bg-white/20 backdrop-blur-sm rounded-2xl p-4 mb-6">
                <div class="flex justify-between items-center">
                    <button onclick="returnToMenu()" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors">
                        ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –æ—Å—Ç—Ä–æ–≤
                    </button>
                    <div class="text-center">
                        <h2 id="zoneTitle" class="game-font text-2xl text-white"></h2>
                        <p id="zoneDescription" class="text-blue-100"></p>
                    </div>
                    <div class="text-right">
                        <div class="text-white font-semibold">–¢–µ–∫—É—â–∏–π —Å—á—ë—Ç: <span id="currentScore">0</span></div>
                        <div class="text-yellow-300 font-semibold">–õ—É—á—à–∏–π: <span id="bestScore">0</span></div>
                        <div id="timerDisplay" class="text-yellow-300 font-bold hidden"></div>
                    </div>
                </div>
            </div>
            
            <!-- Zone 1: Match-Up Bay -->
            <div id="zone1Game" class="hidden">
                <div class="bg-white rounded-2xl p-6 shadow-xl">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                            <span id="matchProgress">0/10</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="matchProgressBar" class="progress-bar bg-blue-500 h-3 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="font-bold text-lg mb-4 text-center">–ò–¥–∏–æ–º—ã</h3>
                            <div id="idiomsColumn" class="space-y-3"></div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg mb-4 text-center">–ó–Ω–∞—á–µ–Ω–∏—è</h3>
                            <div id="meaningsColumn" class="space-y-3"></div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-6">
                        <button id="checkMatches" onclick="checkMatches()" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-full font-semibold transition-colors">
                            –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Zone 2: True/False -->
            <div id="zone2Game" class="hidden">
                <div class="bg-white rounded-2xl p-6 shadow-xl max-w-2xl mx-auto">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold">–í–æ–ø—Ä–æ—Å <span id="tfQuestionNum">1</span>/10</span>
                            <span class="text-red-500 font-semibold">–ñ–∏–∑–Ω–∏: <span id="livesCount">3</span> ‚ù§Ô∏è</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="tfProgressBar" class="progress-bar bg-purple-500 h-3 rounded-full" style="width: 10%"></div>
                        </div>
                    </div>
                    
                    <div class="text-center mb-8">
                        <div class="bg-blue-50 rounded-xl p-6 mb-6">
                            <h3 class="text-2xl font-bold text-blue-600 mb-4" id="tfIdiom"></h3>
                            <p class="text-lg text-gray-700" id="tfDefinition"></p>
                        </div>
                        
                        <div class="space-x-4">
                            <button onclick="answerTrueFalse(true)" class="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-full font-bold text-xl transition-colors">
                                ‚úì –í–ï–†–ù–û
                            </button>
                            <button onclick="answerTrueFalse(false)" class="bg-red-500 hover:bg-red-600 text-white px-8 py-4 rounded-full font-bold text-xl transition-colors">
                                ‚úó –ù–ï–í–ï–†–ù–û
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Zone 3: Fill in the Blank -->
            <div id="zone3Game" class="hidden">
                <div class="bg-white rounded-2xl p-6 shadow-xl max-w-2xl mx-auto">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold">–í–æ–ø—Ä–æ—Å <span id="fibQuestionNum">1</span>/10</span>
                            <span class="font-semibold">–ë–æ–Ω—É—Å –¥–æ—Å—Ç—É–ø–µ–Ω! üìù</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="fibProgressBar" class="progress-bar bg-green-500 h-3 rounded-full" style="width: 10%"></div>
                        </div>
                    </div>
                    
                    <div class="text-center mb-8">
                        <div class="bg-green-50 rounded-xl p-6 mb-6">
                            <p class="text-lg text-gray-700 mb-4" id="fibSentence"></p>
                            <select id="fibSelect" class="border-2 border-green-300 rounded-lg px-4 py-2 text-lg font-semibold bg-white">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∏–¥–∏–æ–º—É...</option>
                            </select>
                        </div>
                        
                        <button onclick="submitFillBlank()" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-full font-semibold transition-colors mb-4">
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç
                        </button>
                        
                        <div class="border-t pt-4">
                            <p class="text-sm text-gray-600 mb-2">–ë–æ–Ω—É—Å: –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—ë –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å —ç—Ç–æ–π –∏–¥–∏–æ–º–æ–π!</p>
                            <textarea id="bonusSentence" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ—ë –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –∏–¥–∏–æ–º—É..." class="w-full border-2 border-gray-300 rounded-lg p-3 text-sm"></textarea>
                            <button onclick="submitBonus()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-semibold mt-2 transition-colors">
                                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞ –±–æ–Ω—É—Å (+5 –æ—á–∫–æ–≤)
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Zone 4: Lightning Round -->
            <div id="zone4Game" class="hidden">
                <div class="bg-white rounded-2xl p-6 shadow-xl max-w-2xl mx-auto">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold">–í–æ–ø—Ä–æ—Å <span id="lrQuestionNum">1</span>/20</span>
                            <span id="lrTimer" class="text-2xl font-bold text-red-500">60</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="lrProgressBar" class="progress-bar bg-yellow-500 h-3 rounded-full" style="width: 5%"></div>
                        </div>
                    </div>
                    
                    <div class="text-center mb-8">
                        <div class="bg-yellow-50 rounded-xl p-6 mb-6">
                            <h3 class="text-2xl font-bold text-yellow-600 mb-4" id="lrIdiom"></h3>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4" id="lrOptions">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Zone 5: Scenario Game -->
            <div id="zone5Game" class="hidden">
                <div class="bg-white rounded-2xl p-6 shadow-xl max-w-3xl mx-auto">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-semibold">–°—Ü–µ–Ω–∞—Ä–∏–π <span id="scenarioNum">1</span>/8</span>
                            <span class="font-semibold">–§–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤! üåü</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="scenarioProgressBar" class="progress-bar bg-purple-500 h-3 rounded-full" style="width: 12.5%"></div>
                        </div>
                    </div>
                    
                    <div class="mb-8">
                        <div class="bg-purple-50 rounded-xl p-6 mb-6">
                            <h3 class="text-xl font-bold text-purple-600 mb-4" id="scenarioTitle"></h3>
                            <p class="text-gray-700 mb-4" id="scenarioDescription"></p>
                            <p class="font-semibold text-gray-800" id="scenarioQuestion"></p>
                        </div>
                        
                        <div class="space-y-3" id="scenarioOptions">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Results Modal -->
        <div id="resultsModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
            <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
                <div id="resultsIcon" class="text-6xl mb-4"></div>
                <h3 id="resultsTitle" class="game-font text-2xl mb-4"></h3>
                <p id="resultsMessage" class="text-gray-600 mb-6"></p>
                <div id="resultsScore" class="text-3xl font-bold text-blue-600 mb-2"></div>
                <div id="resultsComparison" class="text-sm text-gray-600 mb-6"></div>
                <button onclick="closeResults()" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-full font-semibold transition-colors">
                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ
                </button>
            </div>
        </div>
    </div>

    <script>
        // Game Data
        const gameData = {
            totalScore: 0,
            zoneScores: [0, 0, 0, 0, 0], // Best scores for each zone
            unlockedZones: [true, false, false, false, false],
            currentZone: 0,
            currentQuestion: 0,
            gameState: {}
        };

        // Russian Idioms database
        const idiomsData = {
            zone1: [
                { idiom: "–ù–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ", meaning: "–ò—Å–ø—ã—Ç—ã–≤–∞—Ç—å –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç; —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ–ª–æ–≤–∫–æ—Å—Ç—å" },
                { idiom: "–ö–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞", meaning: "–ù–∏—á—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç; –±–µ–∑ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π" },
                { idiom: "–î–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", meaning: "–î–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ; —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å" },
                { idiom: "–í–µ—à–∞—Ç—å –ª–∞–ø—à—É –Ω–∞ —É—à–∏", meaning: "–†–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–¥—É; –æ–±–º–∞–Ω—ã–≤–∞—Ç—å" },
                { idiom: "–ë–∏—Ç—å –±–∞–∫–ª—É—à–∏", meaning: "–ë–µ–∑–¥–µ–ª—å–Ω–∏—á–∞—Ç—å; –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å" },
                { idiom: "–î–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", meaning: "–ü—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–∏" },
                { idiom: "–ù–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", meaning: "–ü–æ–∂–µ–ª–∞–Ω–∏–µ —É–¥–∞—á–∏" },
                { idiom: "–ù–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", meaning: "–ü–æ–ª–Ω–æ–µ –º–æ–ª—á–∞–Ω–∏–µ; –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π" },
                { idiom: "–õ–∏—Ç—å –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã", meaning: "–ü—Ä–æ—è–≤–ª—è—Ç—å –ø–æ–∫–∞–∑–Ω—É—é –ø–µ—á–∞–ª—å" },
                { idiom: "–ë–µ–∑ —Ü–∞—Ä—è –≤ –≥–æ–ª–æ–≤–µ", meaning: "–ë—ã—Ç—å –≥–ª—É–ø—ã–º –∏–ª–∏ –Ω–µ—Å–æ–±—Ä–∞–Ω–Ω—ã–º" }
            ],
            zone2: [
                { idiom: "–ù–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ", meaning: "–ò—Å–ø—ã—Ç—ã–≤–∞—Ç—å –Ω–µ–ª–æ–≤–∫–æ—Å—Ç—å", correct: true },
                { idiom: "–ö–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞", meaning: "–ë–µ–∑ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π", correct: true },
                { idiom: "–õ–∏—Ç—å –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã", meaning: "–ò—Å–∫—Ä–µ–Ω–Ω–µ –ø–ª–∞–∫–∞—Ç—å", correct: false },
                { idiom: "–ù–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", meaning: "–ü–æ–∂–µ–ª–∞—Ç—å —É—Å–ø–µ—Ö–∞", correct: true },
                { idiom: "–ë–∏—Ç—å –±–∞–∫–ª—É—à–∏", meaning: "–£—Å–µ—Ä–¥–Ω–æ —Ç—Ä—É–¥–∏—Ç—å—Å—è", correct: false },
                { idiom: "–î–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", meaning: "–°–∏–ª—å–Ω–æ –ø—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å", correct: true },
                { idiom: "–í–µ—à–∞—Ç—å –ª–∞–ø—à—É –Ω–∞ —É—à–∏", meaning: "–û–±–º–∞–Ω—ã–≤–∞—Ç—å", correct: true },
                { idiom: "–ë–µ–∑ —Ü–∞—Ä—è –≤ –≥–æ–ª–æ–≤–µ", meaning: "–ë—ã—Ç—å –≥–ª—É–ø—ã–º", correct: true },
                { idiom: "–î–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", meaning: "–ó–∞–ø—Ä–µ—Ç–∏—Ç—å", correct: false },
                { idiom: "–ù–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", meaning: "–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π", correct: true }
            ],
            zone3: [
                { sentence: "–ù–∞ –Ω–æ–≤–æ–π —Ä–∞–±–æ—Ç–µ —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è ______.", answer: "–Ω–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ", options: ["–Ω–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ", "–∫–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞", "–±–µ–∑ —Ü–∞—Ä—è –≤ –≥–æ–ª–æ–≤–µ", "–Ω–∞ –≤—Å–µ —Å—Ç–æ"] },
                { sentence: "–ö—Ä–∏—Ç–∏–∫–∞ ______ - –æ–Ω –Ω–µ –æ–±—Ä–∞—â–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è.", answer: "–∫–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞", options: ["–∫–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞", "–Ω–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ", "–¥–µ–ª–∞–µ—Ç –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", "–≤–µ—à–∞–µ—Ç –ª–∞–ø—à—É"] },
                { sentence: "–ù–∞—á–∞–ª—å–Ω–∏–∫ –Ω–∞–∫–æ–Ω–µ—Ü ______ –Ω–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É.", answer: "–¥–∞–ª –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", options: ["–¥–∞–ª –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", "–ø–æ–≤–µ—Å–∏–ª –ª–∞–ø—à—É", "–ø–æ–±–∏–ª –±–∞–∫–ª—É—à–∏", "—Å–¥–µ–ª–∞–ª –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞"] },
                { sentence: "–ù–µ —Å—Ç–æ–∏—Ç –µ–º—É –≤–µ—Ä–∏—Ç—å, –æ–Ω —á–∞—Å—Ç–æ ______.", answer: "–≤–µ—à–∞–µ—Ç –ª–∞–ø—à—É –Ω–∞ —É—à–∏", options: ["–≤–µ—à–∞–µ—Ç –ª–∞–ø—à—É –Ω–∞ —É—à–∏", "–±—å—ë—Ç –±–∞–∫–ª—É—à–∏", "–¥–∞—ë—Ç –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", "–ª—å—ë—Ç –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã"] },
                { sentence: "–í–º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã –æ–Ω –≤–µ—Å—å –¥–µ–Ω—å ______.", answer: "–±–∏–ª –±–∞–∫–ª—É—à–∏", options: ["–±–∏–ª –±–∞–∫–ª—É—à–∏", "–≤–µ—à–∞–ª –ª–∞–ø—à—É", "–¥–∞–≤–∞–ª –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", "–ª–∏–ª —Å–ª—ë–∑—ã"] },
                { sentence: "–ù–µ –Ω—É–∂–Ω–æ ______ –∏–∑-–∑–∞ —Ç–∞–∫–æ–π –º–µ–ª–æ—á–∏.", answer: "–¥–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", options: ["–¥–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", "–±–∏—Ç—å –±–∞–∫–ª—É—à–∏", "–≤–µ—à–∞—Ç—å –ª–∞–ø—à—É", "–ª–∏—Ç—å —Å–ª—ë–∑—ã"] },
                { sentence: "–ü–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º –¥—Ä—É–∑—å—è –ø–æ–∂–µ–ª–∞–ª–∏ –º–Ω–µ ______.", answer: "–Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", options: ["–Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", "–Ω–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", "–∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", "–∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã"] },
                { sentence: "–û—Ç –Ω–µ–≥–æ —É–∂–µ –º–µ—Å—è—Ü ______.", answer: "–Ω–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", options: ["–Ω–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", "–Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", "–∫–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞", "–∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã"] },
                { sentence: "–û–Ω ______ –æ —Å–≤–æ–∏—Ö –Ω–µ—É–¥–∞—á–∞—Ö, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç.", answer: "–ª—å—ë—Ç –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã", options: ["–ª—å—ë—Ç –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã", "–¥–µ–ª–∞–µ—Ç –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", "–±—å—ë—Ç –±–∞–∫–ª—É—à–∏", "–≤–µ—à–∞–µ—Ç –ª–∞–ø—à—É"] },
                { sentence: "–≠—Ç–æ—Ç —á–µ–ª–æ–≤–µ–∫ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ ______.", answer: "–±–µ–∑ —Ü–∞—Ä—è –≤ –≥–æ–ª–æ–≤–µ", options: ["–±–µ–∑ —Ü–∞—Ä—è –≤ –≥–æ–ª–æ–≤–µ", "–Ω–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ", "–∫–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞", "–∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω"] }
            ],
            zone4: [
                { idiom: "–ù–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ", options: ["–ß—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –∫–∞–∫ –¥–æ–º–∞", "–ò—Å–ø—ã—Ç—ã–≤–∞—Ç—å –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç", "–ë—ã—Ç—å —Å—ã—Ç—ã–º", "–ú–µ—á—Ç–∞—Ç—å"], answer: 1 },
                { idiom: "–ö–∞–∫ —Å –≥—É—Å—è –≤–æ–¥–∞", options: ["–°–∏–ª—å–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç", "–ë–µ–∑ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π", "–û—á–µ–Ω—å –±–æ–ª—å–Ω–æ", "–°–º–µ—à–Ω–æ"], answer: 1 },
                { idiom: "–î–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", options: ["–ó–∞–ø—Ä–µ—Ç–∏—Ç—å", "–û–¥–æ–±—Ä–∏—Ç—å", "–û—Ç–ª–æ–∂–∏—Ç—å", "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å"], answer: 1 },
                { idiom: "–í–µ—à–∞—Ç—å –ª–∞–ø—à—É –Ω–∞ —É—à–∏", options: ["–ì–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–∞–≤–¥—É", "–û–±–º–∞–Ω—ã–≤–∞—Ç—å", "–í–µ—à–∞—Ç—å –æ–¥–µ–∂–¥—É", "–î–æ–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å—Å—è"], answer: 1 },
                { idiom: "–ë–∏—Ç—å –±–∞–∫–ª—É—à–∏", options: ["–£—Å–µ—Ä–¥–Ω–æ —Ç—Ä—É–¥–∏—Ç—å—Å—è", "–û—Ç–¥—ã—Ö–∞—Ç—å", "–ë–µ–∑–¥–µ–ª—å–Ω–∏—á–∞—Ç—å", "–†–µ–∑–∞—Ç—å –¥–µ—Ä–µ–≤–æ"], answer: 2 },
                { idiom: "–î–µ–ª–∞—Ç—å –∏–∑ –º—É—Ö–∏ —Å–ª–æ–Ω–∞", options: ["–ü—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å", "–£–±–∏—Ä–∞—Ç—å", "–†–∞–∑–¥—Ä–∞–∂–∞—Ç—å", "–ó–∞–±—ã–≤–∞—Ç—å"], answer: 0 },
                { idiom: "–ù–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", options: ["–ù–µ—É–¥–∞—á–∞", "–£—Å–ø–µ—Ö", "–ë–µ–∑ –ø–µ—Ä—å–µ–≤", "–ë–µ–∑ —à–∞–Ω—Å–æ–≤"], answer: 1 },
                { idiom: "–õ–∏—Ç—å –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã", options: ["–ò—Å–∫—Ä–µ–Ω–Ω–∏–µ —Å–ª—ë–∑—ã", "–§–∞–ª—å—à–∏–≤–∞—è –ø–µ—á–∞–ª—å", "–°–ª–∏–∑–∏—Å—Ç—ã–µ —Å–ª—ë–∑—ã", "–ì—Ä–æ–º–∫–∏–π —Å–º–µ—Ö"], answer: 1 },
                { idiom: "–ë–µ–∑ —Ü–∞—Ä—è –≤ –≥–æ–ª–æ–≤–µ", options: ["–£–º–Ω—ã–π", "–†–∞—Å—Å–µ—è–Ω–Ω—ã–π", "–ì–ª—É–ø—ã–π", "–≠–Ω–µ—Ä–≥–∏—á–Ω—ã–π"], answer: 2 },
                { idiom: "–ù–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", options: ["–ü–æ–ª–Ω–∞—è —Ç–∏—à–∏–Ω–∞", "–û—á–µ–Ω—å –≥—Ä–æ–º–∫–æ", "–ß—Ç–æ-—Ç–æ –ø–∞—Ö–Ω–µ—Ç", "–í–Ω–µ–∑–∞–ø–Ω–æ –≤–µ—Ç—Ä–µ–Ω–æ"], answer: 0 },
                { idiom: "–°–ª–æ–º–∞—Ç—å –ª—ë–¥", options: ["–†–∞–∑—Ä—É—à–∏—Ç—å —á—Ç–æ-—Ç–æ", "–ù–∞—á–∞—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä", "–ü–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Ö–æ–ª–æ–¥", "–û—à–∏–±–∏—Ç—å—Å—è"], answer: 1 },
                { idiom: "–ü–æ–¥–ª–∏–≤–∞—Ç—å –º–∞—Å–ª–æ –≤ –æ–≥–æ–Ω—å", options: ["–ì–æ—Ç–æ–≤–∏—Ç—å –µ–¥—É", "–£—Å—É–≥—É–±–ª—è—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é", "–¢—É—à–∏—Ç—å –ø–æ–∂–∞—Ä", "–ó–∞–ø—Ä–∞–≤–ª—è—Ç—å –º–∞—à–∏–Ω—É"], answer: 1 },
                { idiom: "–ö–æ–≥–¥–∞ —Ä–∞–∫ –Ω–∞ –≥–æ—Ä–µ —Å–≤–∏—Å—Ç–Ω–µ—Ç", options: ["–û—á–µ–Ω—å —Å–∫–æ—Ä–æ", "–ù–∏–∫–æ–≥–¥–∞", "–ò–Ω–æ–≥–¥–∞", "–í—á–µ—Ä–∞"], answer: 1 },
                { idiom: "–í–æ–¥–∏—Ç—å –∑–∞ –Ω–æ—Å", options: ["–í–µ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ", "–û–±–º–∞–Ω—ã–≤–∞—Ç—å", "–ò–¥—Ç–∏ –ø–µ—à–∫–æ–º", "–£—á–∏—Ç—å"], answer: 1 },
                { idiom: "–î–µ—Ä–∂–∞—Ç—å —è–∑—ã–∫ –∑–∞ –∑—É–±–∞–º–∏", options: ["–ì–æ–≤–æ—Ä–∏—Ç—å –º–Ω–æ–≥–æ", "–ú–æ–ª—á–∞—Ç—å", "–ß–∏—Å—Ç–∏—Ç—å –∑—É–±—ã", "–ï—Å—Ç—å –±—ã—Å—Ç—Ä–æ"], answer: 1 },
                { idiom: "–°–æ–±–∞—á–∏–π —Ö–æ–ª–æ–¥", options: ["–¢—ë–ø–ª–∞—è –ø–æ–≥–æ–¥–∞", "–û—á–µ–Ω—å —Ö–æ–ª–æ–¥–Ω–æ", "–î–æ–∂–¥–ª–∏–≤–æ", "–°–æ–ª–Ω–µ—á–Ω–æ"], answer: 1 },
                { idiom: "–ù–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞—Ö", options: ["–ú–µ–¥–ª–µ–Ω–Ω–æ", "–û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ", "–¢–∏—Ö–æ", "–ê–∫–∫—É—Ä–∞—Ç–Ω–æ"], answer: 1 },
                { idiom: "–ú–µ–¥–≤–µ–∂—å—è —É—Å–ª—É–≥–∞", options: ["–•–æ—Ä–æ—à–∞—è –ø–æ–º–æ—â—å", "–ü–ª–æ—Ö–∞—è –ø–æ–º–æ—â—å", "–î–æ—Ä–æ–≥–∞—è —É—Å–ª—É–≥–∞", "–ë—ã—Å—Ç—Ä–∞—è –ø–æ–º–æ—â—å"], answer: 1 },
                { idiom: "–ë–µ–ª–∞—è –≤–æ—Ä–æ–Ω–∞", options: ["–û–±—ã—á–Ω—ã–π —á–µ–ª–æ–≤–µ–∫", "–°—Ç—Ä–∞–Ω–Ω—ã–π —á–µ–ª–æ–≤–µ–∫", "–ß—ë—Ä–Ω–∞—è –ø—Ç–∏—Ü–∞", "–£–º–Ω–∞—è –ø—Ç–∏—Ü–∞"], answer: 1 },
                { idiom: "–ó–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏", options: ["–î–æ—Ä–æ–≥–∏–µ —É–∫—Ä–∞—à–µ–Ω–∏—è", "–£–º–µ–ª—ã–µ —Ä—É–∫–∏", "–ñ—ë–ª—Ç—ã–µ —Ä—É–∫–∏", "–ë–æ–ª—å–Ω—ã–µ —Ä—É–∫–∏"], answer: 1 }
            ],
            zone5: [
                {
                    title: "–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å –Ω–∞ –Ω–æ–≤–æ–π —Ä–∞–±–æ—Ç–µ",
                    description: "–í—ã –Ω–µ—Ä–≤–Ω–∏—á–∞–µ—Ç–µ –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ —Å –∫–æ–ª–ª–µ–≥–∞–º–∏.",
                    question: "–ß—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑—Ä—è–¥–∏—Ç—å –æ–±—Å—Ç–∞–Ω–æ–≤–∫—É?",
                    options: [
                        { text: "–ù–∞—á–Ω—É —Ä–∞–∑–≥–æ–≤–æ—Ä –æ —Ö–æ–±–±–∏ –∏ –æ–±—â–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö.", idiom: "—Å–ª–æ–º–∞—Ç—å –ª—ë–¥", correct: true },
                        { text: "–ë—É–¥—É –≤–µ—Å—å –¥–µ–Ω—å –±–µ–∑–¥–µ–ª—å–Ω–∏—á–∞—Ç—å.", idiom: "–±–∏—Ç—å –±–∞–∫–ª—É—à–∏", correct: false },
                        { text: "–ù–∞—á–Ω—É –∫—Ä–∏—Ç–∏–∫–æ–≤–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ.", idiom: "–ø–æ–¥–ª–∏–≤–∞—Ç—å –º–∞—Å–ª–æ –≤ –æ–≥–æ–Ω—å", correct: false },
                        { text: "–†–∞—Å—Å–∫–∞–∂—É –Ω–µ–ø—Ä–∞–≤–¥–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏.", idiom: "–≤–µ—à–∞—Ç—å –ª–∞–ø—à—É –Ω–∞ —É—à–∏", correct: false }
                    ]
                },
                {
                    title: "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –æ—Ç –¥—Ä—É–≥–∞",
                    description: "–ù–µ –±—ã–ª–æ –≤–µ—Å—Ç–µ–π –æ—Ç —Å–æ–∫—É—Ä—Å–Ω–∏–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å.",
                    question: "–ö–∞–∫ –æ–ø–∏—Å–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é?",
                    options: [
                        { text: "–û—Ç –Ω–µ–≥–æ –Ω–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É.", idiom: "–Ω–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", correct: true },
                        { text: "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –∂–µ–ª–∞—é –µ–º—É –Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞.", idiom: "–Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", correct: false },
                        { text: "–î—É–º–∞—é, –æ–Ω –≤–µ—à–∞–µ—Ç –º–Ω–µ –ª–∞–ø—à—É –Ω–∞ —É—à–∏.", idiom: "–≤–µ—à–∞—Ç—å –ª–∞–ø—à—É –Ω–∞ —É—à–∏", correct: false },
                        { text: "–°—á–∏—Ç–∞—é, —á—Ç–æ –æ–Ω –±–µ–∑ —Ü–∞—Ä—è –≤ –≥–æ–ª–æ–≤–µ.", idiom: "–±–µ–∑ —Ü–∞—Ä—è –≤ –≥–æ–ª–æ–≤–µ", correct: false }
                    ]
                },
                {
                    title: "–ó–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–º–æ–Ω—Ç–∞ –∫—É—Ö–Ω–∏",
                    description: "–ü–ª–∏—Ç–æ—á–Ω–∏–∫ –æ–±–µ—â–∞–ª –≤—á–µ—Ä–∞ - –Ω–µ –ø—Ä–∏—à—ë–ª.",
                    question: "–ö–æ–≥–¥–∞ –æ–Ω, –ø–æ-–≤–∞—à–µ–º—É, –ø–æ—è–≤–∏—Ç—Å—è?",
                    options: [
                        { text: "–ö–æ–≥–¥–∞ —Ä–∞–∫ –Ω–∞ –≥–æ—Ä–µ —Å–≤–∏—Å—Ç–Ω–µ—Ç.", idiom: "–∫–æ–≥–¥–∞ —Ä–∞–∫ –Ω–∞ –≥–æ—Ä–µ —Å–≤–∏—Å—Ç–Ω–µ—Ç", correct: true },
                        { text: "–ö–æ–≥–¥–∞ —Å–æ—Å–µ–¥–∏ –¥–∞–¥—É—Ç –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç.", idiom: "–¥–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", correct: false },
                        { text: "–ö–æ–≥–¥–∞ –æ—Ç –Ω–µ–≥–æ –±—É–¥—É—Ç –≤–µ—Å—Ç–∏.", idiom: "–Ω–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", correct: false },
                        { text: "–ö–æ–≥–¥–∞ –ø–µ—Ä–µ—Å—Ç–∞–Ω—ë—Ç –±–∏—Ç—å –±–∞–∫–ª—É—à–∏.", idiom: "–±–∏—Ç—å –±–∞–∫–ª—É—à–∏", correct: false }
                    ]
                },
                {
                    title: "–ù–µ—á–µ—Å—Ç–Ω—ã–π –ø—Ä–æ–¥–∞–≤–µ—Ü",
                    description: "–ü—Ä–æ–¥–∞–≤–µ—Ü —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞–º –ø–æ–ª—É–ø—Ä–∞–≤–¥—É, —á—Ç–æ–±—ã –ø—Ä–æ–¥–∞—Ç—å.",
                    question: "–ö–∞–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥–æ–π–¥—ë—Ç?",
                    options: [
                        { text: "–û–Ω –≤–µ—à–∞–µ—Ç –º–Ω–µ –ª–∞–ø—à—É –Ω–∞ —É—à–∏.", idiom: "–≤–µ—à–∞—Ç—å –ª–∞–ø—à—É –Ω–∞ —É—à–∏", correct: true },
                        { text: "–û–Ω –ø—Ä–æ—Å—Ç–æ –±—å—ë—Ç –±–∞–∫–ª—É—à–∏.", idiom: "–±–∏—Ç—å –±–∞–∫–ª—É—à–∏", correct: false },
                        { text: "–û–Ω –ø–æ–¥–ª–∏–≤–∞–µ—Ç –º–∞—Å–ª–æ –≤ –æ–≥–æ–Ω—å.", idiom: "–ø–æ–¥–ª–∏–≤–∞—Ç—å –º–∞—Å–ª–æ –≤ –æ–≥–æ–Ω—å", correct: false },
                        { text: "–û–Ω –¥–∞—ë—Ç –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç —Å–¥–µ–ª–∫–µ.", idiom: "–¥–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", correct: false }
                    ]
                },
                {
                    title: "–°–ª–æ–∂–Ω—ã–π —ç–∫–∑–∞–º–µ–Ω –∑–∞–≤—Ç—Ä–∞",
                    description: "–£ –¥—Ä—É–≥–∞ –∑–∞–≤—Ç—Ä–∞ –≤–∞–∂–Ω—ã–π –∑–∞—á—ë—Ç.",
                    question: "–ö–∞–∫ –ª—É—á—à–µ –ø–æ–∂–µ–ª–∞—Ç—å —É—Å–ø–µ—Ö–∞?",
                    options: [
                        { text: "–ù–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞!", idiom: "–Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", correct: true },
                        { text: "–≠—Ç–æ –∫–æ–≥–¥–∞ —Ä–∞–∫ –Ω–∞ –≥–æ—Ä–µ —Å–≤–∏—Å—Ç–Ω–µ—Ç.", idiom: "–∫–æ–≥–¥–∞ —Ä–∞–∫ –Ω–∞ –≥–æ—Ä–µ —Å–≤–∏—Å—Ç–Ω–µ—Ç", correct: false },
                        { text: "–ò–¥–∏ –±–µ–π –±–∞–∫–ª—É—à–∏.", idiom: "–±–∏—Ç—å –±–∞–∫–ª—É—à–∏", correct: false },
                        { text: "–õ–µ–π –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã.", idiom: "–ª–∏—Ç—å –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã", correct: false }
                    ]
                },
                {
                    title: "–ó–∞–±—ã—Ç–∞—è –¥–æ–º–∞—à–Ω—è—è —Ä–∞–±–æ—Ç–∞",
                    description: "–í—ã –Ω–µ —Å–¥–µ–ª–∞–ª–∏ –∑–∞–¥–∞–Ω–∏–µ, —É—á–∏—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç.",
                    question: "–ö–∞–∫ –æ–ø–∏—Å–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ?",
                    options: [
                        { text: "–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ.", idiom: "–Ω–µ –≤ —Å–≤–æ–µ–π —Ç–∞—Ä–µ–ª–∫–µ", correct: true },
                        { text: "–Ø –±–∏–ª –±–∞–∫–ª—É—à–∏ –≤—Å—é –Ω–æ—á—å.", idiom: "–±–∏—Ç—å –±–∞–∫–ª—É—à–∏", correct: false },
                        { text: "–Ø –¥–∞–ª —Å–µ–±–µ –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç –Ω–∞ –ø—Ä–æ–≤–∞–ª.", idiom: "–¥–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", correct: false },
                        { text: "–Ø –ª—å—é –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã.", idiom: "–ª–∏—Ç—å –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤—ã —Å–ª—ë–∑—ã", correct: false }
                    ]
                },
                {
                    title: "–û—Ñ–∏—Å–Ω—ã–µ —Å–ø–ª–µ—Ç–Ω–∏",
                    description: "–í —á–∞—Ç–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è —Å–ª—É—Ö–∏.",
                    question: "–ö–∞–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –¥–µ–π—Å—Ç–≤–∏—è?",
                    options: [
                        { text: "–û–Ω–∏ –ø–æ–¥–ª–∏–≤–∞—é—Ç –º–∞—Å–ª–æ –≤ –æ–≥–æ–Ω—å.", idiom: "–ø–æ–¥–ª–∏–≤–∞—Ç—å –º–∞—Å–ª–æ –≤ –æ–≥–æ–Ω—å", correct: true },
                        { text: "–û–Ω–∏ –±—å—é—Ç –±–∞–∫–ª—É—à–∏.", idiom: "–±–∏—Ç—å –±–∞–∫–ª—É—à–∏", correct: false },
                        { text: "–û–Ω–∏ –¥–∞—é—Ç –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç.", idiom: "–¥–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", correct: false },
                        { text: "–û—Ç –Ω–∏—Ö –Ω–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É.", idiom: "–Ω–∏ —Å–ª—É—Ö—É –Ω–∏ –¥—É—Ö—É", correct: false }
                    ]
                },
                {
                    title: "–ù–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã",
                    description: "–ù—É–∂–Ω–æ —É—Å–ø–æ–∫–æ–∏—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏—é.",
                    question: "–ö–∞–∫–æ–π –ø—Ä–∏—ë–º —Å—Ä–∞–±–æ—Ç–∞–µ—Ç?",
                    options: [
                        { text: "–ù—É–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å –ª—ë–¥.", idiom: "—Å–ª–æ–º–∞—Ç—å –ª—ë–¥", correct: true },
                        { text: "–î–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç.", idiom: "–¥–∞—Ç—å –∑–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç", correct: false },
                        { text: "–ü–æ–¥–ª–∏—Ç—å –º–∞—Å–ª–æ –≤ –æ–≥–æ–Ω—å.", idiom: "–ø–æ–¥–ª–∏–≤–∞—Ç—å –º–∞—Å–ª–æ –≤ –æ–≥–æ–Ω—å", correct: false },
                        { text: "–ü–æ–∂–µ–ª–∞—Ç—å –Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞.", idiom: "–Ω–∏ –ø—É—Ö–∞ –Ω–∏ –ø–µ—Ä–∞", correct: false }
                    ]
                }
            ]
        };

        // Initialize game
        function initGame() {
            updateDisplay();
        }

        function updateDisplay() {
            // Calculate total score from best zone scores
            gameData.totalScore = gameData.zoneScores.reduce((total, score) => total + score, 0);
            
            document.getElementById('totalScore').textContent = gameData.totalScore;
            document.getElementById('overallProgress').style.width = `${Math.min(gameData.totalScore / 600 * 100, 100)}%`;
            
            // Update zone scores display
            for (let i = 0; i < 5; i++) {
                document.getElementById(`zone${i+1}Score`).textContent = `–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${gameData.zoneScores[i]}`;
            }
            
            // Update zone locks
            for (let i = 0; i < 5; i++) {
                const zoneCard = document.querySelector(`[data-zone="${i+1}"]`);
                const button = zoneCard.querySelector('button');
                
                if (gameData.unlockedZones[i]) {
                    zoneCard.classList.remove('zone-locked');
                    zoneCard.querySelectorAll('h3, p, span').forEach(el => {
                        el.classList.remove('text-gray-400');
                        if (el.tagName === 'H3') el.classList.add('text-blue-600');
                        else el.classList.add('text-gray-600');
                    });
                    button.className = 'bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-full font-semibold transition-colors';
                    button.textContent = gameData.zoneScores[i] > 0 ? '–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞' : '–ù–∞—á–∞—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ';
                    button.onclick = () => startZone(i + 1);
                }
            }
            
            // Update rank
            updatePlayerRank();
        }

        function updatePlayerRank() {
            const rankElement = document.getElementById('playerRank');
            if (gameData.totalScore >= 500) {
                rankElement.textContent = '–ú–∞—Å—Ç–µ—Ä –ò–¥–∏–æ–º üèÜ';
            } else if (gameData.totalScore >= 400) {
                rankElement.textContent = '–û–ø—ã—Ç–Ω—ã–π –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å üß≠';
            } else {
                rankElement.textContent = '–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è üí°';
            }
        }

        function startZone(zoneNum) {
            gameData.currentZone = zoneNum;
            gameData.currentQuestion = 0;
            
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            // Hide all game zones
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`zone${i}Game`).classList.add('hidden');
            }
            
            // Show current zone
            document.getElementById(`zone${zoneNum}Game`).classList.remove('hidden');
            
            // Set zone title and description
            const zoneInfo = {
                1: { title: 'üèñÔ∏è –ë—É—Ö—Ç–∞ –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π', desc: '–°–æ–ø–æ—Å—Ç–∞–≤—å—Ç–µ –∏–¥–∏–æ–º—ã —Å –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è–º–∏' },
                2: { title: '‚õ∞Ô∏è –°–∫–∞–ª—ã –û–±–º–∞–Ω–∞', desc: '–í—ã–∑–æ–≤—ã –ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –õ–æ–∂—å' },
                3: { title: 'üíé –°–æ–∫—Ä–æ–≤–∏—â–Ω–∏—Ü–∞', desc: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–ø—É—Å–∫–∏' },
                4: { title: '‚ö° –ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è –õ–∞–≥—É–Ω–∞', desc: '–°–∫–æ—Ä–æ—Å—Ç–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞' },
                5: { title: 'üåÄ –õ–∞–±–∏—Ä–∏–Ω—Ç –ò–¥–∏–æ–º', desc: '–°—Ü–µ–Ω–∞—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã' }
            };
            
            document.getElementById('zoneTitle').textContent = zoneInfo[zoneNum].title;
            document.getElementById('zoneDescription').textContent = zoneInfo[zoneNum].desc;
            document.getElementById('currentScore').textContent = '0';
            document.getElementById('bestScore').textContent = gameData.zoneScores[zoneNum - 1];
            
            // Initialize specific zone
            switch(zoneNum) {
                case 1: initZone1(); break;
                case 2: initZone2(); break;
                case 3: initZone3(); break;
                case 4: initZone4(); break;
                case 5: initZone5(); break;
            }
        }

        // Zone 1: Match-Up Bay
        function initZone1() {
            const idioms = [...idiomsData.zone1];
            const meanings = [...idiomsData.zone1.map(item => item.meaning)];
            
            // Shuffle meanings
            for (let i = meanings.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [meanings[i], meanings[j]] = [meanings[j], meanings[i]];
            }
            
            gameData.gameState = { idioms, meanings, matches: {} };
            
            renderMatchingGame();
        }

        function renderMatchingGame() {
            const idiomsColumn = document.getElementById('idiomsColumn');
            const meaningsColumn = document.getElementById('meaningsColumn');
            
            idiomsColumn.innerHTML = '';
            meaningsColumn.innerHTML = '';
            
            gameData.gameState.idioms.forEach((item, index) => {
                const idiomDiv = document.createElement('div');
                idiomDiv.className = 'drag-item bg-blue-100 border-2 border-blue-300 rounded-lg p-3 text-center font-semibold cursor-grab';
                idiomDiv.draggable = true;
                idiomDiv.textContent = item.idiom;
                idiomDiv.dataset.idiom = item.idiom;
                idiomDiv.addEventListener('dragstart', handleDragStart);
                idiomsColumn.appendChild(idiomDiv);
            });
            
            gameData.gameState.meanings.forEach((meaning, index) => {
                const meaningDiv = document.createElement('div');
                meaningDiv.className = 'drop-zone bg-gray-50 border-2 border-gray-300 rounded-lg p-3 text-center min-h-[60px] flex items-center justify-center';
                meaningDiv.dataset.meaning = meaning;
                meaningDiv.textContent = meaning;
                meaningDiv.addEventListener('dragover', handleDragOver);
                meaningDiv.addEventListener('drop', handleDrop);
                meaningsColumn.appendChild(meaningDiv);
            });
        }

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.idiom);
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.target.classList.add('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.target.classList.remove('drag-over');
            
            const idiom = e.dataTransfer.getData('text/plain');
            const meaning = e.target.dataset.meaning;
            
            gameData.gameState.matches[idiom] = meaning;
            
            // Visual feedback
            e.target.innerHTML = `<div class="font-semibold text-blue-600">${idiom}</div><div class="text-sm text-gray-600">${meaning}</div>`;
            e.target.classList.add('bg-blue-50', 'border-blue-400');
            
            // Hide the dragged item
            const draggedItem = document.querySelector(`[data-idiom="${idiom}"]`);
            if (draggedItem) draggedItem.style.opacity = '0.3';
            
            updateMatchProgress();
        }

        function updateMatchProgress() {
            const matchCount = Object.keys(gameData.gameState.matches).length;
            document.getElementById('matchProgress').textContent = `${matchCount}/10`;
            document.getElementById('matchProgressBar').style.width = `${matchCount * 10}%`;
        }

        function checkMatches() {
            let correctMatches = 0;
            const matches = gameData.gameState.matches;
            
            gameData.gameState.idioms.forEach(item => {
                const dropZone = document.querySelector(`[data-meaning="${matches[item.idiom]}"]`);
                if (matches[item.idiom] === item.meaning) {
                    correctMatches++;
                    if (dropZone) dropZone.classList.add('correct-match');
                } else if (matches[item.idiom]) {
                    if (dropZone) dropZone.classList.add('wrong-match');
                }
            });
            
            const currentScore = correctMatches * 10;
            const zoneIndex = 0;
            const previousBest = gameData.zoneScores[zoneIndex];
            const isNewRecord = currentScore > previousBest;
            
            // Update best score only if this is better
            if (isNewRecord) {
                gameData.zoneScores[zoneIndex] = currentScore;
            }
            
            // Check if zone 2 should be unlocked (80% accuracy)
            if (correctMatches >= 8) {
                gameData.unlockedZones[1] = true;
            }
            
            showResults(1, currentScore, correctMatches, 10, previousBest, isNewRecord);
        }

        // Zone 2: True/False
        function initZone2() {
            gameData.gameState = {
                questions: [...idiomsData.zone2],
                currentQ: 0,
                score: 0,
                lives: 3,
                correctAnswers: 0
            };
            
            showTrueFalseQuestion();
        }

        function showTrueFalseQuestion() {
            const state = gameData.gameState;
            const question = state.questions[state.currentQ];
            
            document.getElementById('tfQuestionNum').textContent = state.currentQ + 1;
            document.getElementById('livesCount').textContent = state.lives;
            document.getElementById('tfIdiom').textContent = question.idiom;
            document.getElementById('tfDefinition').textContent = question.meaning;
            document.getElementById('tfProgressBar').style.width = `${(state.currentQ + 1) * 10}%`;
        }

        function answerTrueFalse(userAnswer) {
            const state = gameData.gameState;
            const question = state.questions[state.currentQ];
            const correct = userAnswer === question.correct;
            
            if (correct) {
                state.score += 5;
                state.correctAnswers++;
                document.getElementById('currentScore').textContent = state.score;
            } else {
                state.lives--;
                state.score = Math.max(0, state.score - 2);
                document.getElementById('currentScore').textContent = state.score;
                
                if (state.lives <= 0) {
                    // Reset to start of zone
                    state.currentQ = 0;
                    state.lives = 3;
                    state.score = 0;
                    showTrueFalseQuestion();
                    return;
                }
            }
            
            state.currentQ++;
            
            if (state.currentQ >= state.questions.length) {
                // Zone complete
                const zoneIndex = 1;
                const previousBest = gameData.zoneScores[zoneIndex];
                const isNewRecord = state.score > previousBest;
                
                if (isNewRecord) {
                    gameData.zoneScores[zoneIndex] = state.score;
                }
                
                gameData.unlockedZones[2] = true; // Unlock zone 3
                showResults(2, state.score, state.correctAnswers, state.questions.length, previousBest, isNewRecord);
            } else {
                setTimeout(showTrueFalseQuestion, 1000);
            }
        }

        // Zone 3: Fill in the Blank
        function initZone3() {
            gameData.gameState = {
                questions: [...idiomsData.zone3],
                currentQ: 0,
                score: 0,
                correctAnswers: 0
            };
            
            showFillBlankQuestion();
        }

        function showFillBlankQuestion() {
            const state = gameData.gameState;
            const question = state.questions[state.currentQ];
            
            document.getElementById('fibQuestionNum').textContent = state.currentQ + 1;
            document.getElementById('fibSentence').textContent = question.sentence;
            document.getElementById('fibProgressBar').style.width = `${(state.currentQ + 1) * 10}%`;
            
            // Populate select options
            const select = document.getElementById('fibSelect');
            select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∏–¥–∏–æ–º—É...</option>';
            question.options.forEach(option => {
                const optionEl = document.createElement('option');
                optionEl.value = option;
                optionEl.textContent = option;
                select.appendChild(optionEl);
            });
            
            // Clear bonus textarea
            document.getElementById('bonusSentence').value = '';
        }

        function submitFillBlank() {
            const state = gameData.gameState;
            const question = state.questions[state.currentQ];
            const userAnswer = document.getElementById('fibSelect').value;
            
            if (!userAnswer) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–¥–∏–æ–º—É!');
                return;
            }
            
            const correct = userAnswer === question.answer;
            
            if (correct) {
                state.score += 15;
                state.correctAnswers++;
                document.getElementById('currentScore').textContent = state.score;
            }
            
            // Move to next question or finish
            state.currentQ++;
            
            if (state.currentQ >= state.questions.length) {
                const zoneIndex = 2;
                const previousBest = gameData.zoneScores[zoneIndex];
                const isNewRecord = state.score > previousBest;
                
                if (isNewRecord) {
                    gameData.zoneScores[zoneIndex] = state.score;
                }
                
                gameData.unlockedZones[3] = true; // Unlock zone 4
                showResults(3, state.score, state.correctAnswers, state.questions.length, previousBest, isNewRecord);
            } else {
                setTimeout(showFillBlankQuestion, 1000);
            }
        }

        function submitBonus() {
            const bonusText = document.getElementById('bonusSentence').value.trim();
            if (bonusText.length > 10) { // Simple validation
                gameData.gameState.score += 5;
                document.getElementById('currentScore').textContent = gameData.gameState.score;
                alert('–ë–æ–Ω—É—Å–Ω—ã–µ –æ—á–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω—ã! +5 –æ—á–∫–æ–≤');
                document.getElementById('bonusSentence').value = '';
            } else {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–Ω—ã—Ö –æ—á–∫–æ–≤!');
            }
        }

        // Zone 4: Lightning Round
        function initZone4() {
            gameData.gameState = {
                questions: [...idiomsData.zone4],
                currentQ: 0,
                score: 0,
                timeLeft: 60,
                correctAnswers: 0,
                timer: null
            };
            
            startLightningTimer();
            showLightningQuestion();
        }

        function startLightningTimer() {
            const state = gameData.gameState;
            document.getElementById('timerDisplay').classList.remove('hidden');
            
            state.timer = setInterval(() => {
                state.timeLeft--;
                const timerEl = document.getElementById('lrTimer');
                timerEl.textContent = state.timeLeft;
                
                if (state.timeLeft <= 10) {
                    timerEl.classList.add('timer-warning');
                }
                
                if (state.timeLeft <= 0) {
                    clearInterval(state.timer);
                    finishLightningRound();
                }
            }, 1000);
        }

        function showLightningQuestion() {
            const state = gameData.gameState;
            const question = state.questions[state.currentQ];
            
            document.getElementById('lrQuestionNum').textContent = state.currentQ + 1;
            document.getElementById('lrIdiom').textContent = question.idiom;
            document.getElementById('lrProgressBar').style.width = `${(state.currentQ + 1) * 5}%`;
            
            const optionsContainer = document.getElementById('lrOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'bg-yellow-100 hover:bg-yellow-200 border-2 border-yellow-300 rounded-lg p-4 font-semibold transition-colors';
                button.textContent = option;
                button.onclick = () => answerLightning(index);
                optionsContainer.appendChild(button);
            });
        }

        function answerLightning(selectedIndex) {
            const state = gameData.gameState;
            const question = state.questions[state.currentQ];
            const correct = selectedIndex === question.answer;
            
            if (correct) {
                state.score += 5 + Math.floor(state.timeLeft / 10); // Base points + time bonus
                state.correctAnswers++;
                document.getElementById('currentScore').textContent = state.score;
            }
            
            state.currentQ++;
            
            if (state.currentQ >= state.questions.length || state.timeLeft <= 0) {
                finishLightningRound();
            } else {
                showLightningQuestion();
            }
        }

        function finishLightningRound() {
            const state = gameData.gameState;
            clearInterval(state.timer);
            document.getElementById('timerDisplay').classList.add('hidden');
            
            const zoneIndex = 3;
            const previousBest = gameData.zoneScores[zoneIndex];
            const isNewRecord = state.score > previousBest;
            
            if (isNewRecord) {
                gameData.zoneScores[zoneIndex] = state.score;
            }
            
            gameData.unlockedZones[4] = true; // Unlock final zone
            showResults(4, state.score, state.correctAnswers, Math.min(state.questions.length, 20), previousBest, isNewRecord);
        }

        // Zone 5: Scenario Game
        function initZone5() {
            gameData.gameState = {
                scenarios: [...idiomsData.zone5],
                currentS: 0,
                score: 0,
                correctAnswers: 0
            };
            
            showScenario();
        }

        function showScenario() {
            const state = gameData.gameState;
            const scenario = state.scenarios[state.currentS];
            
            document.getElementById('scenarioNum').textContent = state.currentS + 1;
            document.getElementById('scenarioTitle').textContent = scenario.title;
            document.getElementById('scenarioDescription').textContent = scenario.description;
            document.getElementById('scenarioQuestion').textContent = scenario.question;
            document.getElementById('scenarioProgressBar').style.width = `${(state.currentS + 1) * 12.5}%`;
            
            const optionsContainer = document.getElementById('scenarioOptions');
            optionsContainer.innerHTML = '';
            
            scenario.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'bg-purple-100 hover:bg-purple-200 border-2 border-purple-300 rounded-lg p-4 text-left transition-colors w-full';
                button.innerHTML = `<div class="font-semibold">${option.text}</div><div class="text-sm text-gray-600 mt-1">–ò—Å–ø–æ–ª—å–∑—É—è: "${option.idiom}"</div>`;
                button.onclick = () => answerScenario(index);
                optionsContainer.appendChild(button);
            });
        }

        function answerScenario(selectedIndex) {
            const state = gameData.gameState;
            const scenario = state.scenarios[state.currentS];
            const correct = scenario.options[selectedIndex].correct;
            
            if (correct) {
                state.score += 20;
                state.correctAnswers++;
                document.getElementById('currentScore').textContent = state.score;
            }
            
            state.currentS++;
            
            if (state.currentS >= state.scenarios.length) {
                const zoneIndex = 4;
                const previousBest = gameData.zoneScores[zoneIndex];
                const isNewRecord = state.score > previousBest;
                
                if (isNewRecord) {
                    gameData.zoneScores[zoneIndex] = state.score;
                }
                
                showResults(5, state.score, state.correctAnswers, state.scenarios.length, previousBest, isNewRecord);
            } else {
                setTimeout(showScenario, 1500);
            }
        }

        // Results and Navigation
        function showResults(zone, currentScore, correct, total, previousBest, isNewRecord) {
            const modal = document.getElementById('resultsModal');
            const icon = document.getElementById('resultsIcon');
            const title = document.getElementById('resultsTitle');
            const message = document.getElementById('resultsMessage');
            const scoreDisplay = document.getElementById('resultsScore');
            const comparisonDisplay = document.getElementById('resultsComparison');
            
            const percentage = Math.round((correct / total) * 100);
            
            if (percentage >= 80) {
                icon.textContent = isNewRecord ? 'üéâ' : '‚ú®';
                title.textContent = isNewRecord ? '–ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥!' : '–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!';
                message.textContent = `–í—ã –æ—Å–≤–æ–∏–ª–∏ —ç—Ç—É –∑–æ–Ω—É —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é ${percentage}%!`;
            } else if (percentage >= 60) {
                icon.textContent = 'üëç';
                title.textContent = '–•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞!';
                message.textContent = `–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ ${percentage}%. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è!`;
            } else {
                icon.textContent = 'üí™';
                title.textContent = '–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Å—Ç–∞—Ä–∞—Ç—å—Å—è!';
                message.textContent = `–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ ${percentage}%. –ü—Ä–∞–∫—Ç–∏–∫–∞ - –ø—É—Ç—å –∫ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É!`;
            }
            
            scoreDisplay.textContent = `${currentScore} –æ—á–∫–æ–≤`;
            
            if (isNewRecord && previousBest > 0) {
                comparisonDisplay.textContent = `–ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥! –ü—Ä–µ–¥—ã–¥—É—â–∏–π –ª—É—á—à–∏–π: ${previousBest}`;
                comparisonDisplay.className = 'text-sm text-green-600 mb-6 font-semibold';
            } else if (previousBest > 0) {
                comparisonDisplay.textContent = `–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${Math.max(currentScore, previousBest)}`;
                comparisonDisplay.className = 'text-sm text-gray-600 mb-6';
            } else {
                comparisonDisplay.textContent = '';
            }
            
            modal.classList.remove('hidden');
        }

        function closeResults() {
            document.getElementById('resultsModal').classList.add('hidden');
            returnToMenu();
        }

        function returnToMenu() {
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('mainMenu').classList.remove('hidden');
            updateDisplay();
        }

        // Initialize the game when page loads
        initGame();
    </script>
</body>
</html>
